<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Getting Started with PRAS | PRAS</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Getting Started with PRAS" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Probabilistic Resource Adequacy Suite" />
<meta property="og:description" content="The Probabilistic Resource Adequacy Suite" />
<link rel="canonical" href="https://nrel.github.io/PRAS/getting-started.html" />
<meta property="og:url" content="https://nrel.github.io/PRAS/getting-started.html" />
<meta property="og:site_name" content="PRAS" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Getting Started with PRAS" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"The Probabilistic Resource Adequacy Suite","headline":"Getting Started with PRAS","url":"https://nrel.github.io/PRAS/getting-started.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/PRAS/assets/css/style.css?v=c56a2575d39da7415b283b74d69a06d8740f40dd">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/PRAS/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">Getting Started with PRAS</h1>
      <h2 class="project-tagline">The Probabilistic Resource Adequacy Suite</h2>
      
        <a href="https://github.com/NREL/PRAS" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="getting-started-with-pras">Getting Started with PRAS</h1>

<p>For a complete overview of PRAS, see the
<a href="https://www.nrel.gov/docs/fy21osti/79698.pdf">v0.6 documentation report</a>.
This page provides a briefer overview to help you start running PRAS quickly.</p>

<h2 id="parallel-processing">Parallel Processing</h2>

<p>PRAS uses multi-threading, so be sure to set the environment variable
controlling the number of threads available to Julia (36 in this Bash example,
which is a good choice for NREL Eagle nodes - on a laptop you would probably
only want 4 or so) before running scripts or launching the REPL:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">JULIA_NUM_THREADS</span><span class="o">=</span>36
</code></pre></div></div>

<h2 id="power-system-data">Power System Data</h2>

<p>The recommended way to store and retreive PRAS system data is in an HDF5 file
that conforms to the
<a href="https://github.com/NREL/PRAS/blob/master/SystemModel_HDF5_spec.md">PRAS system data format</a>.
Once your system is represented in that format you can load it into PRAS with:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="n">PRAS</span>
<span class="n">sys</span> <span class="o">=</span> <span class="n">SystemModel</span><span class="x">(</span><span class="s">"filepath/to/systemdata.pras"</span><span class="x">)</span>
</code></pre></div></div>

<h2 id="resource-adequacy-assessment">Resource Adequacy Assessment</h2>

<p>PRAS functionality is distributed across groups of
modular specifications that can be mixed, extended, or replaced to support the
needs of a particular analysis. When assessing reliability or capacity value,
one can define the specs to be used while passing along any associated
parameters or options.</p>

<p>The categories of specifications are:</p>

<p><strong>Simulation Specifications</strong>: How should power system operations be simulated?
Options are <code class="language-plaintext highlighter-rouge">Convolution</code> and <code class="language-plaintext highlighter-rouge">SequentialMonteCarlo</code>.</p>

<p><strong>Result Specifications</strong>: What kind and level of detail of results should be
saved out during simulations?
Options include <code class="language-plaintext highlighter-rouge">Shortfall</code>, <code class="language-plaintext highlighter-rouge">Surplus</code>, interface <code class="language-plaintext highlighter-rouge">Flow</code>, <code class="language-plaintext highlighter-rouge">StorageEnergy</code>,
and <code class="language-plaintext highlighter-rouge">GeneratorStorageEnergy</code>. Not all simulation specifications support all
result specifications.
(See the <a href="https://www.nrel.gov/docs/fy21osti/79698.pdf">PRAS documentation</a>
for more details.)</p>

<p><strong>Capacity Credit Specifications</strong>: If performing a capacity credit
calculation, which method should be used?
Options are <code class="language-plaintext highlighter-rouge">EFC</code> and <code class="language-plaintext highlighter-rouge">ELCC</code>.</p>

<h3 id="running-an-analysis">Running an analysis</h3>

<p>Analysis centers around the <code class="language-plaintext highlighter-rouge">assess</code> method with different arguments passed
depending on the desired analysis to run.
For example, to run a copper-plate convolution-based reliability assessment
(<code class="language-plaintext highlighter-rouge">Convolution</code>) with LOLE and EUE reporting (<code class="language-plaintext highlighter-rouge">Shortfall</code>),
one would run:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">assess</span><span class="x">(</span><span class="n">mysystemmodel</span><span class="x">,</span> <span class="n">Convolution</span><span class="x">(),</span> <span class="n">Shortfall</span><span class="x">())</span>
</code></pre></div></div>

<p>If you instead want to run a simulation that considers energy-limited resources
and transmission constraints, using 100,000 Monte Carlo samples,
the method call becomes:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">assess</span><span class="x">(</span><span class="n">mysystemmodel</span><span class="x">,</span> <span class="n">SequentialMonteCarlo</span><span class="x">(</span><span class="n">samples</span><span class="o">=</span><span class="mi">100_000</span><span class="x">),</span> <span class="n">Shortfall</span><span class="x">())</span>
</code></pre></div></div>

<p>You can request multiple kinds of result from a single assessment:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">assess</span><span class="x">(</span><span class="n">mysystemmodel</span><span class="x">,</span> <span class="n">SequentialMonteCarlo</span><span class="x">(</span><span class="n">samples</span><span class="o">=</span><span class="mi">100_000</span><span class="x">),</span> <span class="n">Shortfall</span><span class="x">(),</span> <span class="n">Flow</span><span class="x">())</span>
</code></pre></div></div>

<h3 id="querying-results">Querying Results</h3>

<p>Each result type requested returns a seperate result object. These objects can
then be queried using indexing syntax to extract values of interest.</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">shortfalls</span><span class="x">,</span> <span class="n">flows</span> <span class="o">=</span>
    <span class="n">assess</span><span class="x">(</span><span class="n">mysystemmodel</span><span class="x">,</span> <span class="n">SequentialMonteCarlo</span><span class="x">(</span><span class="n">samples</span><span class="o">=</span><span class="mi">100_000</span><span class="x">),</span> <span class="n">Shortfall</span><span class="x">(),</span> <span class="n">Flow</span><span class="x">())</span>

<span class="n">flows</span><span class="x">[</span><span class="s">"Region A"</span> <span class="o">=&gt;</span> <span class="s">"Region B"</span><span class="x">]</span>
</code></pre></div></div>

<p>The full PRAS documentation provides more details on how different result
object types can be indexed.</p>

<p>Because the main results of interest from resource adequacy assessments are
probabilistic risk metrics (i.e. EUE and LOLE), <code class="language-plaintext highlighter-rouge">Shortfall</code> result objects
define some additional methods: a particular risk metric can be
obtained by calling that metric’s constructor with the <code class="language-plaintext highlighter-rouge">Shortfall</code>
result object. For example, to obtain the system-wide LOLE and EUE over the
simulation period:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lole</span> <span class="o">=</span> <span class="n">LOLE</span><span class="x">(</span><span class="n">shortfalls</span><span class="x">)</span>
<span class="n">eue</span> <span class="o">=</span> <span class="n">EUE</span><span class="x">(</span><span class="n">shortfalls</span><span class="x">)</span>
</code></pre></div></div>

<p>Single-period metrics can also be extracted. For example, to get system-wide
EUE for April 27th, 2024 at 1pm EST:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">period_eue</span> <span class="o">=</span> <span class="n">EUE</span><span class="x">(</span><span class="n">shortfalls</span><span class="x">,</span> <span class="n">ZonedDateTime</span><span class="x">(</span><span class="mi">2024</span><span class="x">,</span> <span class="mi">4</span><span class="x">,</span> <span class="mi">27</span><span class="x">,</span> <span class="mi">13</span><span class="x">,</span> <span class="n">tz</span><span class="s">"EST"</span><span class="x">))</span>
</code></pre></div></div>

<p>Region-specific metrics can also be extracted. For example, to obtain the LOLE
of Region A across the entire simulation period:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">eue_a</span> <span class="o">=</span> <span class="n">LOLE</span><span class="x">(</span><span class="n">shortfalls</span><span class="x">,</span> <span class="s">"Region A"</span><span class="x">)</span>
</code></pre></div></div>

<p>Finally, metrics can be obtained for both a specific region and time:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">period_eue_a</span> <span class="o">=</span> <span class="n">EUE</span><span class="x">(</span><span class="n">shortfalls</span><span class="x">,</span> <span class="s">"Region A"</span><span class="x">,</span> <span class="n">ZonedDateTime</span><span class="x">(</span><span class="mi">2024</span><span class="x">,</span> <span class="mi">4</span><span class="x">,</span> <span class="mi">27</span><span class="x">,</span> <span class="mi">13</span><span class="x">,</span> <span class="n">tz</span><span class="s">"EST"</span><span class="x">))</span>
</code></pre></div></div>

<h2 id="capacity-credit-calculations">Capacity Credit Calculations</h2>

<p>Capacity credit calcuations build on probabilistic resource adequacy assessment
to provided capacity-based quantifications of the marginal benefit to
system resource adequacy associated with a specific resource or collection of
resources. Two capacity credit metrics (EFC and ELCC) are currently supported.</p>

<h3 id="equivalent-firm-capacity-efc">Equivalent Firm Capacity (EFC)</h3>

<p><code class="language-plaintext highlighter-rouge">EFC</code> estimates the amount of idealized, 100%-available capacity that, when
added to a baseline system, reproduces the level of system adequacy associated
with the baseline system plus the study resource. The following parameters must
be specified:</p>

<ul>
  <li>The risk metric to be used for comparison (i.e. EUE or LOLE)</li>
  <li>A known upper bound on the EFC value (usually the resource’s nameplate
capacity)</li>
  <li>The regional distribution of the firm capacity to be added. This is
typically chosen to match the regional distribution of the study resource’s
nameplate capacity.</li>
</ul>

<p>For example, to assess the EUE-based EFC of a new resource with 1000 MW
nameplate capacity, added to the system in a single region named “A”:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># The base system, with power units in MW</span>
<span class="n">base_system</span>

<span class="c"># The base system augmented with some incremental resource of interest</span>
<span class="n">augmented_system</span>

<span class="c"># Get the lower and upper bounds on the EFC estimate for the resource</span>
<span class="n">efc</span> <span class="o">=</span> <span class="n">assess</span><span class="x">(</span>
    <span class="n">base_system</span><span class="x">,</span> <span class="n">augmented_system</span><span class="x">,</span> <span class="n">EFC</span><span class="x">{</span><span class="n">EUE</span><span class="x">}(</span><span class="mi">1000</span><span class="x">,</span> <span class="s">"A"</span><span class="x">),</span>
    <span class="n">SequentialMonteCarlo</span><span class="x">(</span><span class="n">samples</span><span class="o">=</span><span class="mi">100_000</span><span class="x">))</span>
<span class="n">min_efc</span><span class="x">,</span> <span class="n">max_efc</span> <span class="o">=</span> <span class="n">extrema</span><span class="x">(</span><span class="n">efc</span><span class="x">)</span>
</code></pre></div></div>

<p>If the study resource were instead split between regions “A” (600MW) and “B”
(400 MW), one could specify the firm capacity distribution as:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">efc</span> <span class="o">=</span> <span class="n">assess</span><span class="x">(</span>
    <span class="n">base_system</span><span class="x">,</span> <span class="n">augmented_system</span><span class="x">,</span> <span class="n">EFC</span><span class="x">{</span><span class="n">EUE</span><span class="x">}(</span><span class="mi">1000</span><span class="x">,</span> <span class="x">[</span><span class="s">"A"</span><span class="o">=&gt;</span><span class="mf">0.6</span><span class="x">,</span> <span class="s">"B"</span><span class="o">=&gt;</span><span class="mf">0.4</span><span class="x">]),</span>
    <span class="n">SequentialMonteCarlo</span><span class="x">(</span><span class="n">samples</span><span class="o">=</span><span class="mi">100_000</span><span class="x">))</span>
</code></pre></div></div>

<h3 id="equivalent-load-carrying-capability-elcc">Equivalent Load Carrying Capability (ELCC)</h3>

<p><code class="language-plaintext highlighter-rouge">ELCC</code> estimates the amount of additional load that can be added to the system
(in every time period) in the presence of a new study resource, while
maintaining the baseline system’s original adequacy level. The following
parameters must be specified:</p>

<ul>
  <li>The risk metric to be used for comparison (i.e. EUE or LOLE)</li>
  <li>A known upper bound on the ELCC value (usually the resource’s nameplate
capacity)</li>
  <li>The regional distribution of the load to be added. Note that this choice is
somewhat ambiguous in multi-region systems, so assumptions should be clearly
specified when reporting analysis results.</li>
</ul>

<p>For example, to assess the EUE-based ELCC of a new resource with 1000 MW
nameplate capacity, serving new load in region “A”:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># The base system, with power units in MW</span>
<span class="n">base_system</span>

<span class="c"># The base system augmented with some incremental resource of interest</span>
<span class="n">augmented_system</span>

<span class="c"># Get the lower and upper bounds on the ELCC estimate for the resource</span>
<span class="n">elcc</span> <span class="o">=</span> <span class="n">assess</span><span class="x">(</span>
    <span class="n">base_system</span><span class="x">,</span> <span class="n">augmented_system</span><span class="x">,</span> <span class="n">ELCC</span><span class="x">{</span><span class="n">EUE</span><span class="x">}(</span><span class="mi">1000</span><span class="x">,</span> <span class="s">"A"</span><span class="x">),</span>
    <span class="n">SequentialMonteCarlo</span><span class="x">(</span><span class="n">samples</span><span class="o">=</span><span class="mi">100_000</span><span class="x">))</span>
<span class="n">min_elcc</span><span class="x">,</span> <span class="n">max_elcc</span> <span class="o">=</span> <span class="n">extrema</span><span class="x">(</span><span class="n">elcc</span><span class="x">)</span>
</code></pre></div></div>

<p>If instead the goal was to study the ability of the new resource to provide
load evenly to regions “A” and “B”, one could use:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">elcc</span> <span class="o">=</span> <span class="n">assess</span><span class="x">(</span>
    <span class="n">base_system</span><span class="x">,</span> <span class="n">augmented_system</span><span class="x">,</span> <span class="n">ELCC</span><span class="x">{</span><span class="n">EUE</span><span class="x">}(</span><span class="mi">1000</span><span class="x">,</span> <span class="x">[</span><span class="s">"A"</span><span class="o">=&gt;</span><span class="mf">0.5</span><span class="x">,</span> <span class="s">"B"</span><span class="o">=&gt;</span><span class="mf">0.5</span><span class="x">]),</span>
    <span class="n">SequentialMonteCarlo</span><span class="x">(</span><span class="n">samples</span><span class="o">=</span><span class="mi">100_000</span><span class="x">))</span>
</code></pre></div></div>

<h3 id="capacity-credit-calculations-in-the-presence-of-sampling-error">Capacity credit calculations in the presence of sampling error</h3>

<p>For non-deterministic assessment methods (i.e. Monte Carlo simulations),
running a resource adequacy assessment with different random number generation
seeds will result in different risk metric estimates for the same underlying
system. Capacity credit assessments can be sensitive to this uncertainty,
particularly when attempting to study the impact of a small resource on a
large system with a limited number of simulation samples.</p>

<p>PRAS takes steps to a) limit this uncertainty and b) warn against
potential deficiencies in statistical power resulting from this uncertainty.</p>

<p>First, the same random seed is used across all simulations in the capacity
credit assessment process. If the number of resources and their reliability
parameters (MTTF and MTTR) remain constant across the baseline and augmented
test systems, seed re-use ensures that unit-level outage profiles remain
identical across RA assessments, providing a fixed background against which to
measure changes in RA resulting from the addition of the study resource. Note
that satisfying this condition requires that the study resource be present in
the baseline case, but with its contributions eliminated (e.g. by setting its
capacity to zero). When implementing an assessment method that modifies the
user-provided system to add new resources (such as EFC), the programmer should
assume this invariance exists in the provided data, and not violate it in any
automated modifications.</p>

<p>Second, capacity credit assessments have two different stopping criteria. The
ideal case is that the upper and lower bounds on the capacity
credit metric converge to be sufficiently tight relative to a desired level
of precision. This target precision is 1 system power unit (e.g. MW) by
default, but can be relaxed to loosen the convergence bounds if desired via
the <code class="language-plaintext highlighter-rouge">capacity_gap</code> keyword argument. Once the lower and upper bounds are
tighter than this gap, their values are returned.</p>

<p>Additionally, at each bisection step, a hypothesis test is performed to ensure
that the theoretically-larger bounding risk metric is in fact larger than the
smaller-valued risk metric with a specified level of statistical significance.
By default, this criteria is a maximum p-value of 0.05, although this value
can be changed as desired via the <code class="language-plaintext highlighter-rouge">p_value</code> keyword argument. If at some point
the null hypothesis (the higher risk is not in fact larger than the lower
risk) cannot be rejected at the desired significance level, the assessment
will provide a warning indicating the size of the remaining capacity gap and
return the lower and upper bounds on the capacity credit estimate.</p>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/NREL/PRAS">PRAS</a> is maintained by <a href="https://github.com/NREL">NREL</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
  </body>
</html>
